{"version":3,"file":"bundle_server.mjs","sources":["../../httpd.mjs"],"sourcesContent":["import http      from \"http\"\nimport https     from \"https\"\nimport url       from 'url'; //url parsing\nimport pkg       from 'formidable'; //I have formidable v 2. see https://stackoverflow.com/questions/65368903/node-formidable-why-does-require-work-but-import-does-not\nconst formidable = pkg;\n\nimport fs        from 'fs'; //file system\nimport net       from 'net'; //network\n// debugger;\n//import ws from 'ws';\n// debugger;\n//const {WebSocket, WebSocketServer} = ws;\n//debugger;\n//import {WebSocket, WebSocketServer} from 'ws'; //websocket //dde4 added curlies around ws to fix bug_in_import\n//debugger;\n//import WebSocket from 'ws';\n//WebSocketServer = WebSocket.Server\n//const WebSocketServer = WebSocket.Server\n\n///below fails on Dexter but works on Fry mac\nimport WebSocket, { WebSocketServer } from 'ws'; //see https://www.npmjs.com/package/ws\n//workaround for dexter fails\n//import ws_pkg from 'ws';\n//const { WebSocketServer } = ws_pkg;\n//const { WebSocket } = ws_pkg\n\nimport path      from 'path';\nimport { spawn } from 'child_process'\nimport ModbusRTU from \"modbus-serial\"\nimport os        from \"os\" //dde4 added\n//import {readChunkSync} from 'read-chunk' //https://www.npmjs.com/package/read-chunk\nfunction readChunkSync(filePath, {length, startPosition}) {\n    console.log(\"top of readChunkSync with filePath: \" + filePath +\n                \" length: \" + length + \" startPosition: \" + startPosition)\n    console.log(\"Buffer: \" + Buffer)\n    let buffer = Buffer.alloc(length);\n    console.log(\"got buffer: \" + buffer)\n    console.log(\"got fs.openSync: \" + fs.openSync)\n    const fileDescriptor = fs.openSync(filePath, 'r');\n    console.log(\"got fileDescriptor: \" + fileDescriptor)\n    try {\n        const bytesRead = fs.readSync(fileDescriptor, buffer, {\n            length,\n            position: startPosition,\n        });\n\n        if (bytesRead < length) {\n            buffer = buffer.slice(0, bytesRead);\n        }\n\n        return buffer;\n    } finally {\n        fs.closeSync(fileDescriptor);\n    }\n}\n\n\n\n//dde4 replaced the below requires with the above imports\n/*\nvar http = require('http'); \nvar url = require('url'); //url parsing\nvar formidable = require('formidable');\nvar fs = require('fs'); //file system\nvar net = require('net'); //network\nconst ws = require('ws'); //websocket\nconst path = require('path'); //parse path / file / extension\nconst { spawn } = require('child_process'); //see top of file\n*/\n// https://github.com/websockets/ws \n//install with:\n//npm install --save ws \n//on Dexter, if httpd.js is going to be in the /srv/samba/share/ folder, \n//install ws there but then run it from root. e.g. \n//cd /srv/samba/share/ \n//npm install --save ws \n//cd /\n//node /srv/samba/share/httpd.js \n\n//var mime = require('mime'); //translate extensions into mime types\n//skip that,it's stupidly big\nvar mimeTypes = {\n  \"css\":  \"text/css\",\n  \"html\": \"text/html\",\n  \"gif\":  \"image/gif\",\n  \"jpeg\": \"image/jpeg\",\n  \"jpg\":  \"image/jpeg\",\n  \"js\":   \"text/javascript\",\n  \"mjs\":  \"text/javascript\", //new for dde4 https://github.com/google/WebFundamentals/issues/7549\n  \"mp3\":  \"audio/mpeg\",\n  \"mp4\":  \"video/mp4\",\n  \"png\":  \"image/png\",\n  \"ico\":  \"image/x-icon\",\n  \"svg\":  \"image/svg+xml\",\n  \"txt\":  \"text/plain\"\n  };\n\n//Code that runs in node_server AND job_engine for get_page\n\nfunction compute_share_folder(){\n    if(running_on_dexter()) {\n        return SHARE_FOLDER_ON_DEXTER\n    }\n    else {\n        return path.join(process.cwd()) //dde4, ie the folder that httpd.mjs is in.\n    }\n}\n\nfunction compute_www_folder(){ //contains httpd.mjs, index.html for the dexter apps titles\n    return SHARE_FOLDER + \"/www\"\n}\n\nfunction compute_dde_folder(){ //new in dde4 //todo dde4 result proably shouldn't end in slash\n    if(running_on_dexter()) {\n        return  WWW_FOLDER + \"/dde\"  //'/root/Documents/dde'\n    }\n    else {\n        return path.join(process.cwd(), 'dde')\n    }\n}\n\nfunction compute_dde_install_folder(){ //new in dde4 //todo dde4 result proably shouldn't end in slash\n   return DDE_FOLDER + \"/build\"\n}\n\nfunction compute_cal_data_folder(){ //new in dde4 //todo dde4 result proably shouldn't end in slash\n    return SHARE_FOLDER + \"/cal_data\"\n}\n\nfunction compute_dde_apps_folder(){ //new in dde4 //todo dde4 result proably shouldn't end in slash\n    if(running_on_dexter()) { return SHARE_FOLDER + '/dde_apps' }\n    else {\n        return os.homedir()  //example: \"/Users/Fry\"\n               + \"/Documents/dde_apps\"\n    }\n}\n\nconst SHARE_FOLDER_ON_DEXTER = \"/srv/samba/share\"\nfunction running_on_dexter() { //dde4 added\n    return fs.existsSync(SHARE_FOLDER_ON_DEXTER)\n}                                                       // folder on dexter   contains                                                        folder on Mac dev\nconst SHARE_FOLDER       = compute_share_folder()       //  /srv/samba/share               //contains dde_apps, www, dde3_je,\nconst WWW_FOLDER         = compute_www_folder()         //  /srv/samba/share/www           //contains dde, httpd.mjs, index.html(tiles), jobs.html(3 & 4)   dde4, contains dde httpd.mjs, index.html(tiles)jobs.html(3 & 4)\nconst DDE_FOLDER         = compute_dde_folder()         //  /srv/samba/share/www/dde       //contains build/, index.html(dde),              dde  contains build, index.html(dde),\nconst DDE_INSTALL_FOLDER = compute_dde_install_folder() //  /srv/samba/share/www/dde/build //contains bundle.mjs, bundle_je.mjs                         dde/build contains bundle.mjs bundle_je.mjs\nconst CAL_DATA_FOLDER    = compute_cal_data_folder()    //  /srv/samba/share/cal_data      //will contain Defaults.make_ins\nconst DDE_APPS_FOLDER    = compute_dde_apps_folder()    //  /srv/samba/share/dde_apps or homedir/Documents/dde_apps                           homedir/Documents/dde_apps\n\nconsole.log(\"SHARE_FOLDER:        \" + SHARE_FOLDER +\n          \"\\nDDE_FOLDER:          \" + DDE_FOLDER   +\n          \"\\nWWW_FOLDER:          \" + WWW_FOLDER   +\n          \"\\nDDE_INSTALL_FOLDER:  \" + DDE_INSTALL_FOLDER +\n          \"\\nCAL_DATA_FOLDER      \" + CAL_DATA_FOLDER +\n          \"\\nDDE_APPS_FOLDER:     \" + DDE_APPS_FOLDER)\n\nfunction make_full_path(path){ //dde4 added\n    if(path.startsWith(\"/\")) {} //keep path as is\n    else if (path === \"dde_apps\") {\n        path = DDE_APPS_FOLDER  //does not contain final slash\n    }\n    else if (path.startsWith(\"dde_apps/\")){\n        let path_sans_dde_apps = path = path.substring(9) //strip off \"dde_apps/\"\n        path = DDE_APPS_FOLDER + \"/\" + path\n    }\n    else if(path.startsWith(\"dde/\")) {\n        path = DDE_FOLDER + \"/\" + path.substring(4) //cut off the \"dde/\" prefix or else we'll get two dde folders in the resulting path\n    }\n    else {\n        path = SHARE_FOLDER + \"/\" + path\n    }\n    return path\n}\n//end of Code that runs in node_server AND job_engine for get_page\n\n\n//const { spawn } = require('child_process'); //see top of file\n /*\nvar job_name_to_process = {};\nfunction get_job_name_to_process(job_name) {\n     console.log(\"get_job_name_to_process passed: \" + job_name)\n     if(job_name_to_process.keep_alive) { //if there is such a process, then keep_alive is true\n     \treturn job_name_to_process.keep_alive;\n     }\n     else {\n        return job_name_to_process[job_name];\n     }\n}\nfunction set_job_name_to_process(job_name, process) { job_name_to_process[job_name] = process }\nfunction remove_job_name_to_process(job_name) { delete job_name_to_process[job_name] }\n\nfunction kill_all_job_processes(){\n    for (let key of Object.keys(job_name_to_process)){\n        let proc = job_name_to_process[key]\n        proc.kill()\n        remove_job_name_to_process(key)\n    }\n}\n*/\nvar job_process = null\n\nfunction kill_job_process(browser_socket){\n    if(job_process) {\n        job_process.kill()\n        job_process = null\n        out_to_browser_out_pane(browser_socket, \"_______Job Process Ended________\", \"red\")\n    }\n    //else {} job_process should already be dead. Don't print the \"Job Process Ended\" message twice\n    //color_job_process_button(browser_socket)\n}\n\n//was make_or_kill_job_process\nfunction make_job_process(browser_socket) {\n    console.log(\"top of make_job_process with job_process: \" + job_process)\n    if (!job_process){\n        console.log(\"in make_job_process, spawning a new process\")\n        let node_arg_for_debug = (debug_value ? \" --inspect-brk \" : \"\")\n        let cmd_line = 'node --experimental-fetch' + node_arg_for_debug\n        let cmd_args =   [\"bundleje.mjs start_je_process\"]\n        let cmd_options = {cwd: DDE_INSTALL_FOLDER, shell: true, stdio: ['ipc']}\n        console.log(\"spawn\\n    cmd_line: \" + cmd_line + \"\\n    cmd_args: \" + cmd_args + \"\\n    cmd_options: \" + JSON.stringify(cmd_options) ) //+ \" &\") //ampersand runs node as a background process\n        console.log(\"in make_job_process setting job_process to result of spawn call\")\n        job_process = spawn(cmd_line,\n                            cmd_args,\n                            cmd_options)\n        //color_job_process_button(browser_socket)\n        console.log(\"just spawned job_process: \" + job_process + \" pid: \" + job_process.pid)\n        console.log(\"job_process type: \" + job_process.constructor.name)\n\n        job_process.on('spawn', function() {\n            console.log(\"make_job_process spawned successfully\")\n        })\n\n        //https://stackoverflow.com/questions/34208614/how-to-catch-an-enoent-with-nodejs-child-process-spawn\n        job_process.on('error', function(err) {\n            console.log(\"make_job_process failed to spawn a new job process: \" + err);\n        })\n\n        job_process.on('message', function(data_obj) {\n            let data_str = JSON.stringify(data_obj)\n            if (browser_socket.readyState != WebSocket.OPEN) {\n                  console.log(\"in server job_process on message readyState NOT open passed data_obj: \" + JSON.stringify(data_obj))\n                 /*kill_job_process(browser_socket);\n                 let data_obj = {\n                    kind: \"job_process_button\",\n                    button_tooltip: \"There is no job process.\",\n                    button_color: rgb(200, 200, 200)\n                }\n                browser_socket.send(data_str);\n                browser_socket.send(JSON.stringify(data_obj))\n                  */\n            }\n            else if (data_obj.kind == \"out_call\") {\n                browser_socket.send(data_str)\n            }\n            else if(data_obj.kind == \"get_dde_version\") {\n                console.log(\"make_job_process on message get_dde_version sending to browser: \" + data_str)\n                browser_socket.send(data_str)\n                if(!keep_alive_value) { kill_job_process(browser_socket) }\n            }\n            else if(data_obj.kind == \"eval_result\") {\n                browser_socket.send(data_obj.val_html)\n                if(!keep_alive_value) { kill_job_process(browser_socket) }\n            }\n            else if(data_obj.kind == \"all_jobs_finished\"){\n                if(!keep_alive_value) { kill_job_process(browser_socket) }\n            }\n            else if(data_obj.kind == \"show_job_button\") {\n                console.log(\"make_job_process on message got show_job_button, sending \" + JSON.stringify(data_obj))\n                browser_socket.send(data_str)\n            }\n            else {\n                browser_socket.send(data_str)\n            }\n        })\n        job_process.stderr.on('data', function(data) {\n            let data_str = data.toString();\n            console.log(\"in node_server after spawn, got error: \" + data_str)\n            if(data_str.includes(\"ExperimentalWarning:\")){\n                //ignore these warnings. Don't change the job button color to red.\n            }\n            else if(data_str.includes(\"Waiting for the debugger to disconnect\")) {\n                //Happens when we have the job engine UI \"debug\" checkbox checked. Ignore these warnings.\n            }\n            else if(data_str.includes(\"Debugger attached\")) {\n                //Happens when we have the job engine UI \"debug\" checkbox checked. Ignore these warnings.\n            }\n            else if(data_str.includes(\"Debugger listening on\")) {\n                //Happens when we have the job engine UI \"debug\" checkbox checked. Ignore these warnings.\n            }\n            else {\n                console.log(\"\\n\\nserver make_job_process got stderr with data: \" + data_str);\n                //remove_job_name_to_process(job_name) //just because there is an error, that don't mean the job closed.\n                //server_response.write(\"Job.\" + job_name + \" errored with: \" + data)\n                console.log('\\n\\nAbout to stringify 2\\n');\n                let lit_obj = {\n                    kind: \"job_process_button\",\n                    button_tooltip: \"Server errored with: \" + data_str,\n                    button_color: \"red\"\n                };\n                if (browser_socket.readyState != WebSocket.OPEN) {\n                    job_process.kill() //job_process.exit(0)\n                    return;\n                } //maybe should be kill()?\n                browser_socket.send(data_str) //redundant but the below might not be working\n                browser_socket.send(\"<for_server>\" + JSON.stringify(lit_obj) + \"</for_server>\\n\");\n                //server_response.end()\n                //job_process.kill() //*probably* the right thing to do in most cases.\n                //remove_job_name_to_process(job_name);\n                //BUT even with Node v 18, it sends to stderr:\n                // \" ExperimentalWarning: The Fetch API is an experimental feature. This feature could change at any time\"\n                //so we don't want to kill the process just for that.\n            }\n        })\n        job_process.on('close', function(code) {\n            console.log(\"\\n\\nServer closed the process.\");\n            if((code !== 0) && (code !== null) && browser_socket.readyState === WebSocket.OPEN){\n                console.log('\\n\\nAbout to stringify 3\\n');\n                let lit_obj = {\n                    kind: \"job_process_button\",\n                    button_tooltip: \"Errored with server close error code: \" + code,\n                    button_color: \"red\"\n                };\n                browser_socket.send(\"<for_server>\" + JSON.stringify(lit_obj) + \"</for_server>\\n\");\n            }\n            //server_response.end()\n        })\n        https://www.geeksforgeeks.org/node-js-process-exit-event/  ie this method is called\n        //when job_process.exit() is called.\n        job_process.on('exit', function(code) { //do I really need to handle this?\n                setTimeout(function() {\n                    console.log(\"\\n\\nServer on exit the process.\")\n                    kill_job_process(browser_socket)\n                    },\n                    3000)\n        }\n        )\n        out_to_browser_out_pane(browser_socket, \"_______Job Process Started________\", \"green\")\n    }\n    else {\n        console.log(\"in make_job_process, job_process already exists.\")\n    }\n}\n//arg looks like \"myjob.js\", \"myjob.dde\", \"myjob\"\nfunction extract_job_name(job_name_with_extension){\n    if(job_name_with_extension.endsWith(\".dde\")) {\n        return job_name_with_extension.substring(0, job_name_with_extension.length - 4)\n    }\n    else if (job_name_with_extension.endsWith(\".js\")) {\n        return job_name_with_extension.substring(0, job_name_with_extension.length - 3)\n    }\n    else { return job_name_with_extension}\n}\n\n\n//https://www.npmjs.com/package/ws\nconsole.log(\"now making wss\");\nconst wss = new WebSocketServer({port: 3001});    //server: http_server });\nconsole.log(\"done making wss: \" + wss);\n\n\n/*\nfunction color_job_process_button(browser_socket) {\n    console.log(\"top of color_job_process_button with job_process: \" + job_process)\n    let lit_obj = { kind: \"job_process_button\"}\n    if (job_process) {\n            lit_obj.button_tooltip = \"Job process started.\"\n            lit_obj.button_color = \"rgb(136, 255, 136)\"\n    }\n    else {\n        lit_obj.button_tooltip = \"There is no job process.\"\n        lit_obj.button_color = \"rgb(200, 200, 200)\"\n    }\n    let data_str = JSON.stringify(lit_obj)\n    //browser_socket.send(data_str) //redundant but the below might not be working\n    browser_socket.send(\"<for_server>\" + data_str + \"</for_server>\\n\");\n}*/\n\nfunction serve_init_jobs(q, req, res){\n    //console.log(\"top of serve_init_jobs in server\")\n    fs.readdir(DDE_APPS_FOLDER,\n        function(err, items){\n            console.log('serve_init_jobs callback writing labels for job buttons');\n            let items_str = JSON.stringify(items);\n            //console.log(\"serve_init_jobs writing: \" + items_str)\n            res.write(items_str);\n            res.end();\n        });\n}\n\nfunction serve_job_button_click(browser_socket, mess_obj){\n    console.log(\"top of serve_job_button_click with job_process: \" + job_process)\n    let app_file = mess_obj.job_name_with_extension; //includes \".js\" suffix \n    //out(\"\\n\\nserve_job_button_click for:\" + app_file);\n    console.log(\"\\nserve_job_button_click mess_obj:\\n\" + JSON.stringify(mess_obj))\n    let app_type = path.extname(app_file);\n    console.log(\"app_type: \" + app_type)\n    if (-1!=[\".dde\",\".js\"].indexOf(app_type)) { app_type = \".dde\" }//if this is a job engine job\n    let jobfile = app_file;\n    if (!app_file.startsWith(\"/\")) jobfile = DDE_APPS_FOLDER + \"/\" + app_file; //q.search.substr(1)\n    //out(\"serve_job_button_click with jobfile: \" + jobfile)\n    let job_name = extract_job_name(app_file); //console.log(\"job_name: \" + job_name + \"taken from file name\")\n    console.log(\"job_name: \" + job_name)\n\n    let node_arg_for_debug = (debug_value ? \" --inspect-brk \" : \"\")\n    console.log(\"job_process defined?: \"   + globalThis.job_process)\n    if(!job_process) {\n        make_job_process(browser_socket)\n    }\n    else {\n        console.log(\"in serve_job_button_click already got a process\")\n    }\n    let code\n    if (\".dde\" == app_type) { //job engine job\n      //code = \"Job.\" + job_name + \".server_job_button_click()\"\n      //e.g. `web_socket.send(JSON.stringify({\"job_name_with_extension\": \"dexter_message_interface.dde\", \"ws_message\": \"goodbye\" }))`\n        if (mess_obj.ws_message ) { // {\"job_name_with_extension\": jobname.dde, \"ws_message\": data}\n          //code = 'Job.'+job_name+'.user_data.ws_message = \"' + mess_obj.ws_message  + '\"'\n          code = `Job.`+job_name+`.user_data.ws_message = '` + JSON.stringify(mess_obj.ws_message)  + `'\\n`;\n          }\n        else if (mess_obj.code) {\n          code = mess_obj.code + \"\\n\";\n        }\n        else {\n            code = 'Job.maybe_define_and_server_job_button_click(\"' + jobfile + '\")\\n';\n            //setTimeout(function() {\n            //    kill_all_job_processes() //todo this presumes that since there's already a process, we clicked the\n                //job button to stop the process, so kill this process after it settles down\n                //so that starting it up again won't run into the problem with the websocket port open\n            //}, 2000)\n        }\n    }\n    else { // something else, probably bash\n   //     code = mess_obj.ws_message  + \"\\n\";\\\n        shouldnt(\"In serve_job_button_click with non-job app_type: \" + app_type)\n   }\n    //console.log(\"serve_job_button_click writing to job: \" + job_name + \" stdin: \" + code);\n    //https://stackoverflow.com/questions/13230370/nodejs-child-process-write-to-stdin-from-an-already-initialised-process\n    console.log(\"in serve_job_button_click with job_process: \" + job_process)\n    //job_process.stdin.setEncoding('utf-8');\n    //job_process.stdin.write(code);\n    //job_process.stdin.end();\n    mess_obj.keep_live_value = keep_alive_value\n    console.log(\"sending to job_process: \" + JSON.stringify(mess_obj))\n    job_process.send(mess_obj)\n}\n\nfunction serve_get_dde_version(browser_socket, mess_obj){\n    console.log(\"top of serve_get_dde_version\")\n    if(!job_process) {\n        make_job_process(browser_socket)\n    }\n    else {\n        console.log(\"in serve_get_dde_version already got a process\")\n    }\n    mess_obj.keep_live_value = keep_alive_value\n    job_process.send(mess_obj)\n}\n\n//handles hitting ENTER in the cmd_input type in\nfunction serve_eval_button_click(browser_socket, message){\n    console.log(\"top of serve_eval_button_click with message: \" + message)\n    let mess_obj = JSON.parse(message)\n    out_to_browser_out_pane(browser_socket, \"Evaling: \" + mess_obj.code)\n    if(!job_process) {\n        make_job_process(browser_socket)\n    }\n    console.log(\"in serve_eval_button_click sending to job_process: \" + message)\n    //job_process.stdin.setEncoding('utf-8');\n    //job_process.stdin.write(message);\n    mess_obj.keep_live_value = keep_alive_value\n    job_process.send(mess_obj)\n    /*if(!mess_obj.keep_alive_value){\n        setTimeout(function(){ kill_job_process(browser_socket) },\n            3000)\n    }*/\n}\n\nvar keep_alive_value = false\nfunction serve_keep_alive_click(browser_socket, mess_obj){\n    keep_alive_value = mess_obj.keep_alive_value\n    if(!keep_alive_value && job_process){\n        kill_job_process(browser_socket)\n    }\n}\n\nvar debug_value = false\nfunction serve_debug_click(browser_socket, mess_obj){\n    debug_value = mess_obj.debug_value\n}\n\n\n//see bottom of je_and_browser_code.js: submit_window for\n//the properties of mess_obj\nfunction serve_show_window_call_callback(browser_socket, mess_obj){\n    let callback_arg = mess_obj.callback_arg\n    let job_name = callback_arg.job_name\n    console.log(\"in serve_show_window_call_callback setting local job_process that was: \" + job_process)\n    let job_process = get_job_name_to_process(job_name)\n    console.log(\"\\n\\nserve_show_window_call_callback got job_name: \" + job_name + \" and its process: \" + job_process)\n    console.log('\\n\\nAbout to stringify 4\\n');\n    let code = mess_obj.callback_fn_name + \"(\" +\n               JSON.stringify(callback_arg) + \")\"\n    //code = mess_obj.callback_fn_name + '({\"is_submit\": false})' //out('short str')\" //just for testing\n    console.log(\"serve_show_window_call_callback made code: \" + code)\n    job_process.stdin.setEncoding('utf-8');\n    job_process.stdin.write(code + \"\\n\") //need the newline so that stdio.js readline will be called\n}\n\n//not used for dde getting file content from the server.\n//use a path of /edit?edit=/foo/bar.js instead and that\n//bypasses serve_file.\n\nfunction serve_file(q, req, res){\n    let filename = q.pathname\n    let cur_dir = process.cwd()\n    console.log(\"top of serve_file filename: \" + filename + \" cur_dir: \" + cur_dir)\n    if(running_on_dexter()) {\n        let maybe_slash = (q.pathname.startsWith(\"/\") ? \"\" : \"/\")\n        filename = WWW_FOLDER + maybe_slash + q.pathname  //this is in orig dexter file, but replaced for  dde4 with server laptop by the below clause\n    }\n    //dde4 works except for editing a file\n    else { //dde4 not running on dexter\n        filename = q.pathname\n        let maybe_slash = (q.pathname.startsWith(\"/\") ? \"\" : \"/\")\n        //console.log(\"serve_file got cur_dir: \" + cur_dir)\n        //filename = cur_dir + maybe_slash +  q.pathname\n        filename = SHARE_FOLDER + maybe_slash + q.pathname\n    }\n    /*else { //dde4 not running on dexter\n        filename = q.pathname\n        console.log(\"serve_file passed pathname: \" + filename)\n        if(filename.startsWith(\"/\")) {\n            let cur_dir = process.cwd()\n            console.log(\"serve_file got cur_dir: \" + cur_dir)\n            filename = cur_dir +  filename\n        }\n        else { //filename does NOT start with slash\n            filename = \"/\" + filename\n        }\n    }*/\n    console.log(\"serve_file passed pathname: \" + q.pathname +\n              \"\\n                   cur_dir: \" + cur_dir +\n              \"\\n          serving filename: \" + filename)\n\n    //console.log(\"serving \" + filename) //dde4 changed the 2nd arg to filename\n    fs.readFile(filename, function(err, data) {\n        if (err) { console.log(filename, \"not found\")\n            res.writeHead(404, {'Content-Type': 'text/html'})\n            return res.end(\"404 Not Found\")\n        }  \n        res.setHeader('Access-Control-Allow-Origin', '*');\n        let mimeType = mimeTypes[ q.pathname.split(\".\").pop() ] || \"application/octet-stream\"\n        console.log(\"              Content-Type:\", mimeType)\n        res.setHeader(\"Content-Type\", mimeType);\n        res.writeHead(200)\n        res.write(data)\n        return res.end()\n    })\n}\n\nfunction isBinary(byte) { //must use numbers, not strings to compare. ' ' is 32\n  if (byte >= 32 && byte < 128) {return false} //between space and ~\n  if ([13, 10, 9].includes(byte)) { return false } //or text ctrl chars\n  return true\n}\n\nfunction get_page_get_cb() {}\n\n//primarily for debugging the http.createServer callback when using the Job Engine UI\n//the args after \"res\" are the args to an \"out\" call that gets made in jobs.html.\n//BUT calling this errors so don't use as is.\n//res_or_ws can be either a Request object or a WebSocket, a la browser_socket\nfunction out_to_browser_out_pane(browser_socket, val, color=\"black\", temp=false, code=false){\n    console.log(\"out_to_browser_out_pane passed type: \" + browser_socket.constructor.name)\n    let data_obj = {\n        kind: \"out_call\",\n        val:   val,\n        color: color,\n        temp:  temp,\n        code:  code\n    }\n    let data_str = JSON.stringify(data_obj)\n    if (browser_socket.constructor.name === \"ServerResponse\") { //I use lex far \"res\" for this. Shoujld be class ServerResponse but that isn't defined\n        browser_socket.write(data_str);\n    }\n    else if(browser_socket instanceof WebSocket){\n        browser_socket.send(data_str)\n    }\n    else {\n        console.log(\"out_to_browser_out_pane got invalid first arg: \" + browser_socket)\n    }\n}\n\n//standard web server on port 80 to serve files\nvar http_server = http.createServer(async function (req, res) {\n  //see https://nodejs.org/api/http.html#http_class_http_incomingmessage \n  //for the format of q.\n  //console.log(\"web server got request: \" + req.url )\n  var q = url.parse(req.url, true)\n  let [main_url, query_string] = (\"\" + req.url).split(\"?\") //url.parse(req.url,true).search fails\n  let top_web_server_mess = \"\\nweb server passed url: \" + req.url +\n                            \"\\n             pathname: \" + q.pathname +\n                            \"\\n                query: \" + query_string\n  console.log(top_web_server_mess) //can't call out_to_browser_out_pane pane here because\n    //as soon as you do that, ther underlying server code doesn't allow setting headers.\n  if (q.pathname === \"/\") {\n      q.pathname = \"index.html\"\n  }\n  if (q.pathname === \"/init_jobs\") {\n      serve_init_jobs(q, req, res)\n  }\n  //get path info\n  else if (q.pathname === \"/edit\" && q.query.info ) { //added dde4\n      let path = q.query.info\n      console.log(\"Getting info for orig path: \" + path)\n      path = make_full_path(path)\n      console.log(\"Getting info for full path: \" + path)\n      let str_to_write\n      if(fs.existsSync(path)) {\n          let stat = fs.statSync(path)\n          let kind\n          if     (stat.isFile())            { kind = \"file\" }\n          else if(stat.isDirectory())       { kind = \"folder\" }\n          else if(stat.isSocket())          { kind = \"socket\" }\n          else if(stat.isFIFO())            { kind = \"fifo\" }\n          else if(stat.isCharacterDevice()) { kind = \"character_device\" }\n          else                              { kind = \"other\" }\n          stat.kind        = kind\n          stat.full_path   = path\n          let permissions  = (stat.mode & parseInt('777', 8)).toString(8)\n          stat.permissions = permissions\n          str_to_write     = JSON.stringify(stat)\n      }\n      else { str_to_write = \"null\"} //path is non-existant\n      console.log(\"info: \" + str_to_write)\n      res.setHeader('Access-Control-Allow-Origin', '*'); //dde4\n      res.write(str_to_write)\n      res.end()\n  }\n\n  //get directory listing\n  else if (q.pathname === \"/edit\" && q.query.list ) { \n    let listpath = q.query.list\n    //if(!listpath.endsWith(\"/\")) {//fixed in DDEFile/get_folder //dde4 at least on Mac, listpath initially does not end in slash which breaks the below concat of listpath + items[i].name\n    //    listpath = listpath + \"/\"\n    //}\n    //console.log(\"File list:\"+listpath)\n    listpath = make_full_path(listpath)\n    fs.readdir(listpath, {withFileTypes: true}, \n      function(err, items){ //console.log(\"file:\" + JSON.stringify(items))\n        if(err) { console.log(\"error in http.createServer: \" + err.message) } //dde4 added for insurance\n        else    { console.log(\"http.createServer got item count of: \" + items.length) }\n        let dir = []\n        if (q.query.list != \"/\") { //not at root\n          let now = new Date()\n          dir.push({name: \"..\", size: \"\", type: \"dir\", date: now.getTime()})\n          }\n        for (let i = 0; i < items.length; i++) { //dde4 added \"let \"  //console.log(\"file:\", JSON.stringify(items[i]))\n           //console.log(\"getting stats for i: \" + i + \" item: \" + items[i] + \" name: \" + items[i].name)\n          let file_maybe = items[i]\n          if (file_maybe.isFile()) {\n            let file_name = file_maybe.name\n            let size = \"unknown\"\n            let permissions = \"unknown\"\n            let stats = {size: \"unknown\"} //dde4 not used so delete this line and move \"let\" to 3 lines below\n            let date = 0 //dde4 necessary for catch clause of date\n            try { //console.log(\"file:\", listpath + items[i].name)\n              stats = fs.statSync(listpath + file_name)\n              size = stats[\"size\"]\n              date = stats[\"mtimeMs\"]\n              //if(!date) { date = 0 } //dde4 added to fix bug when no mtimeMs\n              permissions = (stats.mode & parseInt('777', 8)).toString(8)\n            } catch (e) {console.log(\"couldn't stat \"+ file_name +\":\"+e) }\n            dir.push({name: file_name, size: size, type: \"file\", permissions: permissions, date: date})\n          } //size is used to see if the file is too big to edit.\n          else if (file_maybe.isDirectory()) {\n            dir.push({name:file_maybe.name, size: \"\", type: \"dir\"})\n            } //directories are not currently supported. \n        }\n        console.log('\\n\\nAbout to stringify 5\\n');\n        res.setHeader('Access-Control-Allow-Origin', '*'); //dde4\n        let dir_listing_str = JSON.stringify(dir)\n        res.write(dir_listing_str)\n        res.end()\n      })\n    }\n    //use url/edit?edit=/foo.bar.js\" to GET contents of a file\n    //use url/edit?download=/foo.bar.js\" to store the file\n    //on the user's disc.\n    ///foo.bar.js is the location of the file on the server.\n    //If browser is set up to auto downlaod to the downloads filer,\n    //it will otherwise browser can be set to ask the user\n    //where the file should go. The Filename including full path,\n    // comes back with the data from the server.\n    //and the browser may chose to prepend \"downloads\" folder and\n    //save just the downloads/filename.txt there.\n   //used by read_file_async\n  else if (q.pathname === \"/edit\" && q.query.edit || q.query.download) { \n    let filename = q.query.edit || q.query.download\n    console.log(\"serving for edit filename: \" + filename)\n    filename = make_full_path(filename) //dde4\n    console.log(\"serving for edit full path filename: \" + filename)\n    fs.readFile(filename, function(err, data) {\n        if (err) {\n            res.setHeader('Access-Control-Allow-Origin', '*'); //dde4\n            res.writeHead(404, {'Content-Type': 'text/html'})\n            return res.end(\"404 Not Found \"+err)\n        }\n        let stats = fs.statSync(filename)\n        //console.log((\"permissions:\" + (stats.mode & parseInt('777', 8)).toString(8)))\n        let line = 0;\n        for (let i = 0; i < data.length; i++) { \n            if (10==data[i]) line++\n            if ( isBinary(data[i]) ) { //console.log(\"binary data:\" + data[i] + \" at:\" + i + \" line:\" + line)\n                res.setHeader(\"Content-Type\", \"application/octet-stream\")\n                break\n                }\n            }\n        if (q.query.download) {\n            res.setHeader(\"Content-Disposition\", \"attachment; filename=\\\"\" + path.basename(filename) + \"\\\"\")\n        }\n        console.log(\"in server edit?edit with: \" + filename + \" about to allow CORS.\")\n        res.setHeader('Access-Control-Allow-Origin', '*'); //dde4\n        res.writeHead(200)\n        //console.log(\"server writing out data: \" + data)\n        res.write(data)\n        return res.end()\n      })\n    }\n    //used by read_file_part\n    else if (q.pathname === \"/edit\" && q.query.read_part){ //dde4\n      let filename = q.query.read_part\n      console.log(\"serving for read_part filename: \" + filename)\n      filename   = make_full_path(filename)\n      let start  = parseInt(q.query.start)\n      let length = parseInt(q.query.length)\n      if(start < 0) { //read length bytes from the end of the file\n          let stats = fs.statSync(filename)\n          let fileSizeInBytes = stats.size;\n          start = fileSizeInBytes - length + start + 1 //compute new start when reading from end\n      }\n      console.log(\"read_file_part full_path: \" + filename + \" start: \" + start + \" length: \" + length)\n      try {\n          console.log(\"got readChunckSync: \" + readChunkSync)\n          let data = readChunkSync(filename, {length: length, startPosition: start});\n          console.log(\"After readChunkSync with data: \" + data)\n          let line = 0;\n          for (let i = 0; i < data.length; i++) {\n              if (10==data[i]) line++\n              if ( isBinary(data[i]) ) { //console.log(\"binary data:\" + data[i] + \" at:\" + i + \" line:\" + line)\n                  res.setHeader(\"Content-Type\", \"application/octet-stream\")\n                  break\n              }\n          }\n          res.setHeader('Access-Control-Allow-Origin', '*'); //dde4\n          res.writeHead(200)\n          //console.log(\"server writing out data: \" + data)\n          res.write(data)\n          return res.end()\n      }\n      catch(err) {\n          res.setHeader('Access-Control-Allow-Origin', '*'); //dde4\n          res.writeHead(404, {'Content-Type': 'text/html'})\n          return res.end(\"404 Not Found \"+ err)\n      }\n    }\n    /*else if(q.pathname === \"/get_page\") {\n        let url = q.query.path\n        let response = await fetch(url)\n        if(response.ok) {\n            let content = await file_info_response.text()\n            res.setHeader('Access-Control-Allow-Origin', '*'); //dde4\n            res.writeHead(200)\n            //console.log(\"server writing out data: \" + data)\n            res.write(data)\n            return res.end()\n        }\n        else {\n            res.setHeader('Access-Control-Allow-Origin', '*'); //dde4\n            res.writeHead(404, {'Content-Type': 'text/html'})\n            return res.end(\"404 \" + url + \" Not Found: \" + err)\n        }\n    }*/\n      //see https://nodejs.org/api/http.html#httpgeturl-options-callback\n      //be very careful \"res\" is the respoonse that goes back to the browser.\n      // \"get_res\" is the response that comes back from the http.get\n    else if(q.pathname === \"/get_page\") {\n      let the_url = q.query.path\n      console.log(\"in get_page clause with the_url: \" + the_url)\n      if (the_url.startsWith(\"https:\")) {\n          let options = {headers: {\"User-Agent\": req.headers['user-agent']}}\n          https.get(url, options, (get_res) => {\n                  let rawData = '';\n                  get_res.on('data', (chunk) => {\n                      rawData += chunk;\n                  });\n                  get_res.on('end', () => {\n                      //res.setHeader('Access-Control-Allow-Origin', '*'); //causes error\n                      if((get_res.statusCode >= 300) &&\n                         (get_res.statusCode <  400) &&\n                          get_res.headers.location) { //an indirection\n                         setTimeout(\n                             function() {\n                                 https.get(get_res.headers.location, options, function() {\n                                     console.log(\"needs work\")\n                                 })\n                             }, 10)\n                      }\n                      else {\n                          res.writeHead(get_res.statusCode)\n                          //console.log(\"server writing out data: \" + data)\n                          res.write(rawData)\n                          return res.end()\n                      }\n                  })\n                  get_res.on(\"error\", (err) => {\n                  //res.setHeader('Access-Control-Allow-Origin', '*'); //causes error\n                     res.writeHead(get_res.statusCode)\n                     return res.end()\n                 })\n          })\n      }\n      else { //presume starts with http:\n          console.log(\"in get_page, http clause\")\n          let options = {headers: {\"User-Agent\": req.headers['user-agent']}}\n          http.get(the_url, options,\n              (get_res) => {\n              let rawData = '';\n              get_res.on('data', (chunk) => {\n                  rawData += chunk;\n              });\n              get_res.on('end', () => {\n                  //res.setHeader('Access-Control-Allow-Origin', '*'); //causes error\n                  res.writeHead(get_res.statusCode)\n                  //console.log(\"server writing out data: \" + data)\n                  res.write(rawData)\n                  return res.end()\n              })\n              get_res.on(\"error\", (err) => {\n                  //res.setHeader('Access-Control-Allow-Origin', '*'); //causes error\n                  res.writeHead(get_res.statusCode)\n                  return res.end()\n              })\n          })\n      }\n      //from https://nodejs.org/api/https.html#httpsgeturl-options-callback\n\n    }\n\n    else if (q.pathname === \"/edit\" && req.method == 'DELETE' ) { //console.log(\"edit delete:\"+JSON.stringify(req.headers))\n      const form = formidable({ multiples: true });\n      form.parse(req, (err, fields, files) => { //console.log(JSON.stringify({ fields, files }, null, 2) +'\\n'+ err)\n        let path = make_full_path(fields.path) //dde4\n        console.log(\"delete:\" + path + \"!\")\n        try {\n            fs.unlinkSync(path)\n            res.setHeader('Access-Control-Allow-Origin', '*'); //dde4\n            res.writeHead(200);\n            return res.end('ok');\n        } catch(e) {\n            res.setHeader('Access-Control-Allow-Origin', '*'); //dde4\n            res.writeHead(400);\n            return res.end(e)\n        }\n      });\n      return\n      }\n      //use POST for updating the content of an existing file\n      //below the first causeofan||(or)is for formindable v 1.2.2  and the 2nd is for formidable v \"^2.0.1\"\n      //used by write_file_async and append_to_file\n     else if (q.pathname === \"/edit\" && req.method == 'POST' ) { //console.log(\"edit post headers:\",req.headers)\n        const form = formidable({ multiples: false });\n        form.once('error', console.error);\n        const DEFAULT_PERMISSIONS = parseInt('644', 8)\n        var stats = {mode: DEFAULT_PERMISSIONS}\n        form.on('file', function (filename, file) {  //console.log(\"edit post file:\",file)\n            //console.log(\"filename: \" + filename + \" file: \" + JSON.stringify(file))\n            let topathfile = (file.name || file.originalFilename) // dde4 we need the \"let\"\n            topathfile = make_full_path(topathfile)\n            try {\n                console.log(\"copy\", (file.path || file.filepath),\n                    \"to\", topathfile)\n                stats = fs.statSync(topathfile)\n                //console.log((\"had permissions:\" + (stats.mode & parseInt('777', 8)).toString(8)))\n            } catch {\n            } //no biggy if that didn't work\n            //if the folder doesn't exist, we want to auto-create it.\n            let topath = topathfile.split('/').slice(0, -1).join('/') + '/' //dde4 needs \"let\"\n            try {\n                console.log(`make folder:${topath}.`)\n                fs.mkdirSync(topath, {recursive: true})\n            } catch (err) {\n                console.log(`Can't make folder:${topath}.`, err)\n                res.setHeader('Access-Control-Allow-Origin', '*'); //dde4\n                res.writeHead(400)\n                return res.end(`Can't make folder ${topath}:`, err)\n            }\n            if (q.query.append) {\n                // open destination file for appending\n                let write_stream = fs.createWriteStream(topathfile, {flags: 'a'});\n                // open source file for reading\n                let read_stream = fs.createReadStream((file.path || file.filepath));\n\n                write_stream.on('close', function() {\n                    fs.unlink((file.path || file.filepath), function (err) {\n                        if (err) console.log((file.path || file.filepath), 'not cleaned up', err);\n                    });\n                    res.setHeader('Access-Control-Allow-Origin', '*'); //dde4\n                    res.end('ok');\n                    console.log(\"done writing\");\n                });\n\n                read_stream.pipe(write_stream);\n                //fs.appendFile((file.path || file.filepath), topathfile)\n            }\n            else {\n                fs.copyFile((file.path || file.filepath),  //or  file.filepath\n                  topathfile, function (err) {\n                    let new_mode = undefined\n                    if (err) {\n                        console.log(\"copy failed:\", err)\n                        res.setHeader('Access-Control-Allow-Origin', '*'); //dde4\n                        res.writeHead(400)\n                        return res.end(\"Failed\")\n                    } else {\n                        fs.chmodSync(topathfile, stats.mode)\n                        try { //sync ok because we will recheck the actual file\n                            let new_stats = fs.statSync(topathfile)\n                            new_mode = new_stats.mode\n                            //console.log((\"has permissions:\" + (new_mode & parseInt('777', 8)).toString(8)))\n                        } catch {\n                        } //if it fails, new_mode will still be undefined\n                        if (stats.mode != new_mode) { //console.log(\"permssions wrong\")\n                            //res.writeHead(400) //no point?\n                            return res.end(\"Permissions error\")\n                        }\n                        fs.unlink((file.path || file.filepath), function (err) {\n                            if (err) console.log((file.path || file.filepath), 'not cleaned up', err);\n                        });\n                        res.setHeader('Access-Control-Allow-Origin', '*'); //dde4\n                        res.end('ok');\n                    }\n                }) //done w/ copyFile\n            }\n          });\n        form.parse(req)\n        return\n        //res.end('ok');\n      // });\n      }\n      //use for creating a new file\n      else if (q.pathname === \"/edit\" && req.method == 'PUT' ) { console.log('edit put')\n        const form = formidable({ multiples: true });\n        form.parse(req, (err, fields, files) => { //console.log('fields:', fields);\n          let pathfile = fields.path\n          let newpath = pathfile.split('/').slice(0,-1).join('/')+'/'\n          try { console.log(`make folder:${newpath}.`)\n            fs.mkdirSync(newpath, {recursive:true})\n          } catch(err) {\n              console.log(`Can't make folder:${newpath}.`, err)\n              res.setHeader('Access-Control-Allow-Origin', '*'); //dde4\n              res.writeHead(400)\n              return res.end(`Can't make folder ${newpath}:`, err)\n          }\n          if (pathfile.slice(-1)!=\"/\") { //if it wasn't just an empty folder\n              fs.writeFile(pathfile, \"\", function (err) { console.log('create' + pathfile)\n                if (err) {\n                  console.log(\"failed\", err)\n                  res.setHeader('Access-Control-Allow-Origin', '*'); //dde4\n                  res.writeHead(400)\n                  return res.end(\"Failed:\" + err)\n                  }\n               }); \n             }\n            res.setHeader('Access-Control-Allow-Origin', '*'); //dde4\n            res.end('ok'); //console.log('done');\n          });\n        }\n      //else if(q.pathname === \"/job_button_click\") {\n  //\t  serve_job_button_click(q, req, res)\n  //}\n  //else if(q.pathname === \"/show_window_button_click\") {\n  //\t  serve_show_window_button_click(q, req, res)\n  //} \n  else {\n  \t  serve_file(q, req, res)\n  }\n})\n\nhttp_server.listen(80)\nconsole.log(\"listening on port 80\")\n\n/* orig james N code\nfunction jobs(q, res){\n console.log(\"serving job list\")\n    fs.readdir(\"/srv/samba/share/dde_apps/\", function(err, items) {\n      if (err) {\n        console.log(\"ERROR:\"+err)\n        res.writeHead(500, {'Content-Type': 'text/html'})\n        return res.end(\"500 Error\")\n        }\n      res.writeHead(200, {'Content-Type': 'text'})\n      for (var i=0; i<items.length; i++) {\n        res.write(items[i]+\"\\n\")\n        }\n      return res.end()\n      })\n    return\n}\n*/\n\n\n// ModBus client server\n//const ModbusRTU = require(\"modbus-serial\"); //see above\nvar modbus_reg = []\n\nfunction modbus_startjob(job_name) {\n\tconsole.log(\"top of modbus_startjob passed job_name\" + job_name)\n\tlet jobfile = DDE_APPS_FOLDER + job_name + \".dde\"\n    console.log(\"modbus_startjob setting local job_process to result of get_job_name_to_process\")\n\tlet job_process = get_job_name_to_process(job_name)\n\tif(!job_process){\n\t    console.log(\"in modbus_startjob spawning \" + jobfile)\n\t    //https://nodejs.org/api/child_process.html\n\t    //https://blog.cloudboost.io/node-js-child-process-spawn-178eaaf8e1f9\n\t    //a jobfile than ends in \"/keep_alive\" is handled specially in core/index.js\n\t    job_process = spawn('node',\n\t\t[\"core define_and_start_job \" + jobfile],   \n\t\t{cwd: DDE_INSTALL_FOLDER, shell: true}\n\t\t)\n\t    set_job_name_to_process(job_name, job_process)\n\t    console.log(\"Spawned \" + DDE_APPS_FOLDER + job_name + \".dde as process id \" + job_process)\n\t    job_process.stdout.on('data', function(data) {\n\t\tconsole.log(\"\\n\\n\" + job_name + \">'\" + data + \"'\\n\")\n\t\tlet data_str = data.toString()\n\t\tif (data_str.substr(0,7) == \"modbus:\") { //expecting 'modbus: 4, 123' or something like that\n\t\t    [addr, value] = data_str.substr(7).split(\",\").map(x => parseInt(x) || 0)\n\t\t    modbus_reg[addr] = value\n\t\t//TODO: Change this to something that allows multiple values to be set in one out.\n\t\t    }\n\t\t})\n\t \n\t    job_process.stderr.on('data', function(data) {\n\t  \tconsole.log(\"\\n\\n\" + job_name + \"!>'\" + data + \"'\\n\")\n\t\t//remove_job_name_to_process(job_name) //error doesn't mean end.\n\t\t})\n\t    job_process.on('close', function(code) {\n\t\tconsole.log(\"\\n\\nJob: \" + job_name + \".dde closed with code: \" + code)\n\t\t//if(code !== 0){  } //who do we tell if a job crashed?\n\t\tremove_job_name_to_process(job_name)\n\t\t})\n\t    }\n\telse {\n\t    console.log(\"\\n\" + job_name + \" already running as process \" + job_process)\n\t    } //finished with !job_process\n\t}\n\nvar vector = {\n    //TODO: Figure out what to return as inputs.\n    // Possible: Values from a file? \n    // e.g. modbus.json has an array where jobs can store data to be read out here.\n    // maybe that is the modbus_reg array as a json file?\n    getInputRegister: function(addr) { //doesn't get triggered by QModMaster for some reason.\n\t//This does work mbpoll -1 -p 8502 -r 2 -t 3 192.168.0.142 \n        console.log(\"read input\", addr)\n        return addr; //just sample data\n        },\n    getMultipleInputRegisters: function(startAddr, length) {\n        console.log(\"read inputs from\", startAddr, \"for\", length); \n        var values = [];\n        for (var i = startAddr; i < length; i++) {\n            values[i] = startAddr + i; //just sample return data\n            }\n        return values;\n        },\n    getHoldingRegister: function(addr) {\n        let value = modbus_reg[addr] || 0\n        console.log(\"read register\", addr, \"is\", value)\n        return value \n        },\n    getMultipleHoldingRegisters: function(startAddr, length) {\n        console.log(\"read registers from\", startAddr, \"for\", length); \n        let values = []\n        for (var i = 0; i < length; i++) {\n            values[i] = modbus_reg[i] || 0\n            }\n        return values\n        },\n    setRegister: function(addr, value) { \n        console.log(\"set register\", addr, \"to\", value) \n        modbus_reg[addr] = value\n        return\n        },\n    getCoil: function(addr) { //return 0 or 1 only.\n        let value = ((addr % 2) === 0) //just sample return data\n        console.log(\"read coil\", addr, \"is\", value)\n        return value \n        //TODO Return the status of the job modbuscoil<addr>.dde\n        // e.g. 1 if it's running, 0 if it's not.\n        },\n    setCoil: function(addr, value) { //gets true or false as a value.\n        console.log(\"set coil\", addr, \" \", value)\n\tif (value) { modbus_startjob(\"modbus\" + addr) }\n\telse { console.log(\"stop\") }\n        //TODO Start or kill job modbuscoil<addr>.dde depending on <value>\n        // Maybe pass in with modbus_reg as a user_data? or they can access the file?\n        return; \n        },\n    readDeviceIdentification: function(addr) {\n        return {\n            0x00: \"HaddingtonDynamics\",\n            0x01: \"Dexter\",\n            0x02: \"1.1\",\n            0x05: \"HDI\",\n            0x97: \"MyExtendedObject1\",\n            0xAB: \"MyExtendedObject2\"\n        };\n    }\n};\n\n// set the server to answer for modbus requests\nconsole.log(\"ModbusTCP listening on modbus://0.0.0.0:8502\");\nvar serverTCP = new ModbusRTU.ServerTCP(vector, { host: \"0.0.0.0\", port: 8502, debug: true, unitID: 1 });\n\nserverTCP.on(\"initialized\", function() {\n    console.log(\"initialized\");\n});\n\nserverTCP.on(\"socketError\", function(err) {\n    console.error(err);\n    serverTCP.close(closed);\n});\n\nfunction closed() {\n    console.log(\"server closed\");\n}\n\n\n// Web Socket Proxy to DexRun raw socket\nwss.on('connection', function(the_ws, req) {\n  console.log(\"\\n\\nwss got connection: \" + the_ws)\n  console.log(\"\\nwss SAME AS the_ws : \" + (wss === the_ws))\n  console.log(\"got req class: \" + req.constructor.name) // IncomingMessage\n  let browser_socket = the_ws //the_socket used when stdout from job engine comes to the web server process\n  the_ws.on('message', function(message) {\n    console.log('\\n\\nwss server on message received: %s', message);\n    let mess_obj\n    try { mess_obj = JSON.parse(message)}\n    catch(err) { console.log(\"bad message: \" + err); return; }\n    console.log(\"\\nwss server on message received kind: \" + mess_obj.kind)\n    if(mess_obj.kind === \"get_dde_version\"){\n        serve_get_dde_version(browser_socket, mess_obj)\n    }\n    else if(mess_obj.kind === \"debug_click\") {\n        serve_debug_click(browser_socket, mess_obj)\n    }\n    else if(mess_obj.kind === \"keep_alive_click\") {\n        serve_keep_alive_click(browser_socket, mess_obj)\n    }\n    else if(mess_obj.kind === \"job_button_click\") {\n    \tserve_job_button_click(browser_socket, mess_obj)\n    }\n    else if(mess_obj.kind === \"show_window_call_callback\"){\n        serve_show_window_call_callback(browser_socket, mess_obj)\n    }\n    else if (mess_obj.kind === \"eval\"){\n        serve_eval_button_click(browser_socket, message)\n    }\n    else {\n      console.log(\"\\n\\nwss server received message kind: \" + mess_obj.kind)\n      serve_job_button_click(browser_socket, mess_obj)\n    }\n  })\n  the_ws.send('websocket connected.\\n')\n})\n\n\n\n//websocket server that connects to Dexter\n//socket server to accept websockets from the browser on port 3000\n//and forward them out to DexRun as a raw socket\nvar browser = new WebSocketServer({ port:3000 })\nvar bs \nvar dexter = new net.Socket()\n//don't open the socket yet, because Dexter only allows 1 socket connection\ndexter.connected = false //track socket status (doesn't ws do this?)\n\nbrowser.on('connection', function connection(socket, req) {\n  console.log(process.hrtime()[1], \" browser connected \", req.connection.Server);\n  bs = socket\n  socket.on('message', function (data) {\n    console.log(process.hrtime()[1], \" browser says \", data.toString());\n    //Now as a client, open a raw socket to DexRun on localhost\n    if (!dexter.connected && !dexter.connecting) { \n      dexter.connect(50000, \"127.0.0.1\") \n      console.log(\"dexter connect\")\n      dexter.on(\"connect\", function () { \n        dexter.connected = true \n        console.log(\"dexter connected\")\n        dexter.write(data.toString());\n        } )\n      dexter.on(\"data\", function (data){\n        //console.log(process.hrtime()[1], \" dexter says \", data)\n        //for(let i = 0; i<8*4; i+=4) {console.log(i, data[i])}\n        console.log(process.hrtime()[1], \" dexter says \",\"#\"+data[1*4]+\" op:\"+String.fromCharCode(data[4*4]) + \" len: \" + data.length)\n        if (data[5*4]) {console.log(\"error:\"+data[5*4])}\n        if (bs) {\n            bs.send(data,{ binary: true })\n            console.log(process.hrtime()[1], \" sent to browser \")\n            }\n        })\n      dexter.on(\"close\", function () { \n        dexter.connected = false \n        console.log(\"dexter disconnect\")\n        dexter.removeAllListeners() \n        //or multiple connect/data/close events next time\n        } )\n      dexter.on(\"end\", function (error) { \n        dexter.connected = false \n        console.log(\"dexter ended\")\n        //dexter.removeAllListeners() \n        if (error) {\n            console.log(error)\n            }\n        dexter.end()\n        dexter.destroy()\n        //or multiple connect/data/close events next time\n        } )\n      dexter.on(\"error\", function () {\n        dexter.connected = false \n        console.log(\"dexter error\")\n        if (bs) { bs.send(null,{ binary: true }) }\n        dexter.removeAllListeners() \n        dexter.destroy()\n        } )\n      } //TODO: Should this be an else? When re-connecting, messages are sent twice.\n    else {//already connected.\n      dexter.write(data.toString());\n      }\n    });\n  socket.on('close', function (data) {\n    console.log(process.hrtime()[1], \" browser disconnected \");\n    bs = null\n    //dexter.close() //not defined.\n    dexter.end()\n    });\n  });"],"names":[],"mappings":"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"}